<!DOCTYPE html>
<html lang="en">
<head>
    <title>AI Object Detection</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Materialize CSS -->
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    >

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- ML5.js -->
    <script
        src="https://unpkg.com/ml5@0.12.2/dist/ml5.min.js"
        type="text/javascript"
    ></script>
</head>

<body>

    <h2 id="loadingText">Loading...</h2>

    <!-- Video element (hidden size due to Chrome autoplay policy) -->
    <video
        id="video"
        playsinline
        autoplay
        muted
        controls="true">
    </video>

    <br><br>

    <!-- Canvas for drawing detections -->
    <canvas id="c1"></canvas>

    <br><br>

    <!-- Controls -->
    <table>
        <tr>
            <td>AI:</td>
            <td>
                <div class="switch">
                    <label>
                        Off
                        <input type="checkbox" id="ai" disabled>
                        <span class="lever"></span>
                        On
                    </label>
                </div>
            </td>
        </tr>

        <tr>
            <td>FPS:</td>
            <td>
                <p class="range-field">
                    <input
                        type="range"
                        id="fps"
                        min="1"
                        max="60"
                        value="50"
                    >
                </p>
            </td>
        </tr>
    </table>

    <!-- Object Detection Script -->
    <script>
        let modelIsLoaded = false;

        // Initialize the Object Detector
        const objectDetector = ml5.objectDetector(
            'cocossd',
            {},
            modelLoaded
        );

        // Callback when model is loaded
        function modelLoaded() {
            console.log("Model Loaded!");
            modelIsLoaded = true;
        }
    </script>

    <!-- Video Processing Logic -->
    <script src="video.js"></script>

    <!-- Materialize JS -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js">
    </script>

</body>
</html>
